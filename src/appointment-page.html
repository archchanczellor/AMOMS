<!--<link rel="import" href="../bower_components/paper-badge/paper-badge.html">-->
<dom-module id="appointment-page">

    <template>

        <style include="shared-styles">
            .horizontal-around {
                @apply(--layout-horizontal);
                @apply(--layout-around-justified);
            }
            .horizontal {
                @apply(--layout-horizontal);
            }
            .horizontal-center {
                @apply(--layout-horizontal);
                @apply(--layout-center);
            }
            .canceled {
                background-color: #F44336;
                color: white
            }
            .in-progress {
                background-color: #FFFF00;
                color: black;
            }
            .completed {
                background-color:#00E676;
                color: black;
            }
            paper-material {
                padding: 10px;
                border-radius: 10px;
                margin: 5px;
                text-transform: uppercase;
            }
        </style>
        <div class="horizontal-around">
            <div class="horizontal">
                <div class="horizontal-center">
                Appointment Status: &nbsp
                </div>
                <paper-material id="statusPill" elevation="1">
                    [[appointmentTest.status]]
                    <paper-dropdown-menu label="Appointment Status" id="editStatus" name="Status" required>
                        <paper-menu class="dropdown-content" selected="{{_computeSelected(userEdit.status)}}">
                            <paper-item name="upcoming" value="upcoming">Upcoming</paper-item>
                            <paper-item name="cancelled" value="cancelled">Cancelled</paper-item>
                            <paper-item name="in-progress" value="in-progress">In-Progress</paper-item>
                            <paper-item name="complete" value="complete">Complete</paper-item>
                            <paper-item name="no-show" value="no-show">No-show</paper-item>
                        </paper-menu>
                    </paper-dropdown-menu>
                </paper-material>
            </div>
        </div>
    </template>

    <script>
        Polymer({
            is: 'appointment-page',
            properties: {
                appointmentTest: {
                    type: Object,
                    value: {status: 'upcoming'}
                }
                userEdit: {
                    type: Object,
                    value: null
                },
                toastMessage: String,
                key: String
            },
            _computeSelected: function (status) {
                if (status == 'upcoming')
                    return 0;
                else if (status == 'cancelled')
                    return 1
                else if (status == 'in-progress')
                    return 2
                else if (status == 'complete')
                    return 3
                else
                    return 4
            },
            observers: [
                'changedStatus(appointmentTest.status)'
            ],

            changedStatus: function(status) {
//                todo: fix this
            },

            ready: function() {
                switch(this.appointmentTest.status) {
                    case 'canceled':
                        this.$.statusPill.classList.add('canceled');
                        break;
                    case 'no-progress':
                        this.$.statusPill.classList.add('no-progress');
                        break;
                    case 'completed':
                        this.$.statusPill.classList.add('completed');
                        break;
                    default:
                        break;
                }
            }
        })
    </script>

</dom-module>