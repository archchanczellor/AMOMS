<dom-module id="grab-appointments">
    <template>
        <style>
            :root {
                display: block;
            }
        </style>
        <poly-filter
                array-to-filter="[[appointments]]"
                filter="[[prac]]"
                filtered-array="{{practitionerAppointments}}"
                filter-by="practitioner"></poly-filter>

        <span>[[numberOfAppointments]]</span>
    </template>
    <script>
        Polymer({
            is: 'grab-appointments',
            properties: {
                practitioner: {
                    type: String,
                    value: null
                },
                appointments: {
                    type: Array,
                    value: [],
                },
                practitionerAppointments: {
                    type: Array,
                    value: []
                },
                numberOfAppointments: {
                    type: String,
                    value: null
                },
                prac: {
                    type: String,
                    value: 'filter'
                }
            },
            observers: [
                '_grabLength(practitionerAppointments.splices)',
                '_setPrac(practitioner)'
            ],
            _grabLength: function (apps) {
                this.numberOfAppointments = this.practitionerAppointments.length
            },
            _setPrac: function(prac) {
                if(prac) {
                    this.prac = this.practitioner
                }
            }
        })
    </script>
</dom-module>